(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"025e":function(t,e,i){i("d3b7"),i("159b"),i("a630"),i("3ca3"),t.exports={setClass:function(t,e,i){t.length>0&&Array.from(t).forEach((function(t){i&&t.classList.remove(i),t.classList.add(e)}))},Array2Object:function(t,e,i){var n={};return t.forEach((function(t){n[t[e]]=t[i]})),n}}},"2d5e":function(t,e,i){},"368ec":function(t,e){function i(){var t=document.getElementById("animated_background"),e=document.createElement("span");e.setAttribute("class","svg_container");var i=50*Math.random();e.style.width=20+i+"px",e.style.height=20+i+"px",e.style.top=Math.random()*innerHeight+"px",e.style.left=Math.random()*innerWidth+"px";var s=document.createElement("img");s.setAttribute("src",n()),s.setAttribute("class","svg"),s.setAttribute("z-index",99),e.appendChild(s),t.appendChild(e),setTimeout((function(){e.remove()}),5e3)}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=Math.floor(Math.random()*t)+1,i="./svg/"+e+".svg";return i}setInterval(i,150)},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=i("f309");n["a"].use(s["a"]);var a,r=new s["a"]({}),o=i("3304"),l=i("ade3"),c=i("5530"),u=(i("d3b7"),i("159b"),i("caad"),i("2532"),i("b64b"),i("4de4"),i("2f62")),d=i("bfa9"),p=i("bc3a"),m=i.n(p),f=m.a.create({baseURL:"http://localhost:3000",headers:{Authorization:null!==(a="Bearer "+JSON.parse(window.localStorage.getItem("vuex")).token)&&void 0!==a?a:""}});n["a"].use(u["a"]);var h=new d["a"]({storage:window.localStorage}),v={current_session:null,pist_playlist:[],sessions:[],pists:[],user:null,token:null,alerts:[],main_theme:"bg-dark",WIDTH:null,profile_settings:{"banner-img":null,"banner-color":null,show:[]}},_=new u["a"].Store({plugins:[h.plugin],state:Object(c["a"])({},v),mutations:{set_CurrentSession:function(t,e){t.current_session=e},set_Sessions:function(t,e){t.sessions=e},set_PistPlaylist:function(t,e){t.pist_playlist=e},set_Token:function(t,e){t.token=e},set_User:function(t,e){t.user=e},set_Pists:function(t,e){t.pists=e},set_MainAudio:function(t,e){t.main_audio=e},set_Player:function(t,e){t.player=e},set_PlayerCurrentTime:function(t,e){t.player_currentTime=e},set_PlayerGlobalVolume:function(t,e){t.player_g_volume=e},set_PistParams:function(t,e){"string"==typeof e.field&&t.pists.forEach((function(i){i.id==e.pistid&&("string"==typeof e.value&&e.value.includes("||")&&console.log("split data"),t[e.field]=e.value)}))},set_Width:function(t,e){t.WIDTH=e},update_User:function(t,e){Object.keys(t.user).includes(e.field)&&(t.user[e.field]=e.value)},push_Alert:function(t,e){e.id=t.alerts.length+1,t.alerts.push(e)},remove_Alert:function(t,e){t.alerts=t.alerts.filter((function(t){return t.id!==e}))},push_Pist:function(t,e){t.pists.push(e)},update_Pist:function(t,e){t.pists.forEach((function(i,n){i.id==e.pistid&&(t.pists[n][e.field]=e.value,f.patch("/api/session_track",{pistid:e.pistid,field:e.field,value:"".concat(e.value)}).catch((function(t){console.log(t)})))}))},remove_Pist:function(t,e){t.pists=t.pists.filter((function(t){return t.id!=e}))},append_Session:function(t,e){t.sessions.push(e)},update_Session:function(t,e){t.sessions.forEach((function(i,n){i.id==e.sessionid&&i.includes(e.field)&&(t.sessions[n][e.field]=e.value)}))},remove_Session:function(t,e){t.Sessions=t.sessions.filter((function(t){return t.id!=e}))},push_PistPlaylist:function(t,e){t.pist_playlist.push(e)},remove_PistPlaylist:function(t,e){t.pist_playlist=t.pist_playlist.filter((function(t){return t.id!=e}))},push_profile_settings:function(t,e){for(var i in e)Object.keys(t.profile_settings).includes(i)?t.profile_settings[i]=e[i]:t.profile_settings=Object(c["a"])(Object(c["a"])({},t.profile_settings),{},Object(l["a"])({},i,e[i]))},logout:function(t){Object.assign(t,v),window.location.href="/authentication"}},actions:{get_pistdata:function(t,e){var i;return t.state.pists.filter((function(t){if(t.id===e.pistid)switch(e.field){case"volume":i=t.volume;break}})),i}}}),g=i("8c4f"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex",staticStyle:{height:"100%"}},[i("div",{staticClass:"w-100"},[i("v-btn",{staticStyle:{position:"absolute",top:"10px",right:"10px","z-index":"90"},attrs:{color:"success","x-small":"",outlined:""},on:{click:t.save}},[t._v("Sauvegarder")]),i("BarManager"),i("div",{staticClass:"d-flex w-100",staticStyle:{height:"calc(100vh - 80px)"}},[t.track_loaded?i("Sidebar"):t._e(),i("PistContainer")],1),i("v-sheet",{staticClass:"pa-3",style:{display:(t.track_loaded,"block")},attrs:{color:"grey darken-2"}},[i("v-skeleton-loader",{staticClass:"mx-auto",attrs:{"max-width":"1200",height:"500px",type:"card"}})],1)],1)])},k=[],x=i("1da1"),y=(i("b0c0"),i("96cf"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"no-radius dark-1",attrs:{width:"fit-content",height:"100%",dark:""}},[i("v-navigation-drawer",{staticClass:"dark-1",attrs:{dark:"",left:"","mini-variant":t.mini,permanent:""},on:{"update:miniVariant":function(e){t.mini=e},"update:mini-variant":function(e){t.mini=e}},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[i("v-list-item",[i("v-list-item-title",[t._v(" Pist ")]),i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[i("v-icon",[t._v("mdi-chevron-left")])],1)],1),i("div",{staticClass:"Slist-Pmanager"},t._l(t.player.tracks,(function(t){return i("SidebarPistManager",{key:t.id,attrs:{pist:t}})})),1)],1)],1)}),w=[],C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"500px",transition:"dialog-transition",dark:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("a",t._g(t._b({staticClass:"custom-link",attrs:{href:"#"}},"a",s,!1),n),[t._v(" Importer")])]}}],null,!0)},[i("v-list",{staticClass:"py-0",attrs:{dark:"",elevation:"12"}},[i("v-list-item",{staticClass:"d-flex justify-center text-3 menu-item",on:{click:t.import_Microphone}},[t._v(" Voix/Micro ")]),i("v-list-item",{staticClass:"d-flex justify-center text-3 menu-item",on:{click:function(e){t.dialog=!0}}},[t._v("Bibliothèque")])],1)],1),i("v-btn",t._g(t._b({staticStyle:{display:"none"},attrs:{color:"sucess",icon:""}},"v-btn",s,!1),n))]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{dark:"",color:"#1A1D21"}},[i("v-card-title",{staticClass:"bg-red d-flex justify-center"},[t._v(" Bibilothèque ")]),i("div",{staticStyle:{height:"600px"}},[i("div",{staticClass:"d-flex",staticStyle:{width:"50%",margin:"0 auto 0 auto"}},[i("v-text-field",{attrs:{label:"recherche"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-simple-table",{attrs:{dark:""}},[[i("thead",[i("tr",[i("th",{staticClass:"table-header"},[t._v("Pist")]),i("th",{staticClass:"text-center table-header"},[t._v("Action")])])]),i("tbody",t._l(t.pists,(function(e){return i("tr",{key:e.id},[i("td",[i("div",{staticClass:"d-flex align-center",staticStyle:{overflow:"hidden",width:"150px"}},[i("div",{staticClass:"text-tanslate-x h-100 d-flex",staticStyle:{width:"fit-content"}},[t._v(" "+t._s(e.name)+" ")])])]),i("td",{staticClass:"text-center"},["session"==t.$route.name?i("v-btn",{attrs:{color:"success",icon:""},on:{click:function(i){return t.import_PistInSession(e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-transfer-down")])],1):t._e()],1)])})),0)]],2)],1),i("v-card-actions",[i("div",{staticClass:"w-100",staticStyle:{"overflow-x":"hidden"}},[i("label",{staticClass:"custom-btn-label",attrs:{for:"input-file"}},[t._v("Choisir un fichier à importer")]),i("input",{staticClass:"custom-btn",attrs:{type:"file",id:"input-file"},on:{change:t.handle_LocalFile}})])])],1)],1)},S=[],$=i("2909"),V=i("d4ec"),j=i("bee2"),E=i("a778"),P=i.n(E),O=function(){function t(){Object(V["a"])(this,t),this.player=null,this.time=0,this.volume=this.player?this.player.masterGain:0,this.track_on_move=!1,this.on_selection=!1}return Object(j["a"])(t,[{key:"init_player",value:function(){this.player=P()({ac:new(window.AudioContext||window.webkitAudioContext),samplesPerPixel:5e3,timescale:!0,mono:!0,waveHeight:80,container:document.getElementById("pists-container"),state:"select",seekStyle:"fill",colors:{waveOutlineColor:"#0f1013",timeColor:"red",fadeColor:"red"},zoomLevels:[500,1e3,3e3,5e3,1e4]})}},{key:"load_tracks",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(i,n){t.player.load(null!=e?e:_.state.pists).then((function(){i()})).catch((function(){return n()}))}))}},{key:"remove_track",value:function(t){this.player.getEventEmitter().emit("removeTrack",t)}},{key:"add_track",value:function(t){this.player.getEventEmitter().emit("newtrack",t)}},{key:"set_volume",value:function(t){this.player.getEventEmitter().emit("mastervolumechange",t)}},{key:"set_track_volume",value:function(t,e){this.player.getEventEmitter().emit("volumechange",t,e)}},{key:"mute_unmute_track",value:function(t){return t.api_options.muted?this.player("volumechange",1,t):this.player("volumechange",0,t),!t.api_options.muted}},{key:"play",value:function(){this.player.getEventEmitter().emit("play")}},{key:"pause",value:function(){this.player.getEventEmitter().emit("pause")}},{key:"get_Tracks",value:function(){return this.player.tracks}},{key:"get_track",value:function(t){return this.player.tracks.filter((function(e){return e.api_options.id==t}))}},{key:"set_state",value:function(t){this.track_on_move="shift"==t,"select"==t&&(this.on_selection=!0),this.player.getEventEmitter().emit("statechange",t)}}]),t}(),I=new O,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("searchbar",{attrs:{add_url:"/api/pist",item:"pist",search_url:"/api/search/pists"}}),i("div",{staticClass:"container"},[i("v-simple-table",[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Piste")]),i("th",{staticClass:"text-center"}),i("th",{staticClass:"text-right"},[t._v("action")])])]),i("tbody",t._l(t.pists,(function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.name))]),i("td",{staticClass:"text-center"},[t._v(t._s(e.importedIn))]),i("td",{staticClass:"text-right"},[i("v-btn",{attrs:{"x-small":"",icon:"",color:"red"},on:{click:function(i){return t.delete_pist(e.id)}}},[i("v-icon",[t._v("mdi-close")])],1)],1)])})),0)])],1)],1)},T=[],R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fs-3 text-white d-flex justify-space-between align-center"},[i("div",{staticClass:"head-lefft w-80 d-flex align-center pl-3"},[i("v-text-field",{attrs:{label:"Search","hide-details":"auto",dense:"",rounded:"",solo:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),"session"!=t.item||t.on_add?t._e():i("v-btn",{staticClass:"ml-4",attrs:{color:"success",outlined:"",icon:"","x-small":""},on:{click:function(e){t.on_add=!t.on_add}}},[i("v-icon",[t._v(" mdi-plus ")])],1),"pist"==t.item?i("div",{staticClass:"ml-4"},[i("v-file-input",{staticClass:"ma-0 pa-0 pb-1",attrs:{"hide-input":"",accept:".mp3,.wav",color:"red","hide-details":"true","background-color":"success",filled:"",dark:"",dense:"","prepend-icon":"mdi-plus"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1):t._e(),"session"==t.item?i("div",{class:"d-flex ml-3 add_session "+(t.on_add?"add":"disable")},[i("v-text-field",{attrs:{solo:"","hide-details":"auto",dense:""},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.create.apply(null,arguments)},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.on_add=!1}]},model:{value:t.session_name,callback:function(e){t.session_name=e},expression:"session_name"}}),i("v-btn",{attrs:{color:"",dark:"",icon:""}},[i("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){t.on_add=!1}}},[t._v("mdi-close")])],1)],1):t._e()],1),i("div",{staticClass:"head-right pr-10 d-flex align-center"},[i("v-btn",{attrs:{small:"",icon:"",color:"white"},on:{click:function(e){return t.paginate("previous-page")}}},[i("v-icon",{attrs:{color:""}},[t._v("mdi-chevron-left")])],1),t._v(" "+t._s(t.page)+" "),i("v-btn",{attrs:{small:"",icon:"",color:"white"},on:{click:function(e){return t.paginate("next-page")}}},[i("v-icon",[t._v("mdi-chevron-right")])],1)],1)])},B=[],D=(i("ac1f"),i("841c"),{props:{add_url:{required:!0},item:{required:!0},search_url:{required:!1}},data:function(){return{query:"",result:[],on_add:!1,session_name:"",params:{},page:0,total_page:0,file:null}},watch:{file:function(){this.create()},query:function(){this.search()}},methods:{search:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f.post(this.search_url,{query:this.query}).then(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(i){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=i.data,"session"!=e.item){t.next=10;break}if(!(n.totalItems>0)){t.next=6;break}e.$parent.sessions=n.datas,t.next=8;break;case 6:return t.next=8,e.$parent.GetSessions();case 8:t.next=17;break;case 10:if("pist"!=e.item){t.next=17;break}if(!(n.totalItems>0)){t.next=15;break}e.$parent.pists=n.datas,t.next=17;break;case 15:return t.next=17,e.$parent.get();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),create:function(){var t=this;if("session"==this.item)this.$parent.create_session(this.session_name);else if("pist"==this.item){if(null!==this.file){var e=new FormData;e.append("audio",this.file),f.post(this.add_url,e).then((function(e){var i=e.data;console.log(i),t.$parent.pists.push({id:i.id,name:i.name})})).catch((function(t){console.log(t)}))}}else console.log()},paginate:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("next-page"==e?this.page<this.total_page&&(this.page+=1):"previous-page"==e&&this.page>0&&(this.page-=1),"session"!=this.item){t.next=8;break}return t.next=4,this.$parent.get_sessions(this.page);case 4:this.total_page=t.sent,console.log(this.total_page),t.next=13;break;case 8:if("pist"!=this.item){t.next=13;break}return t.next=11,this.$parent.get(this.page);case 11:this.total_page=t.sent,console.log(this.total_page);case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}}),L=D,q=i("2877"),M=i("6544"),F=i.n(M),z=i("8336"),N=i("23a7"),U=i("132d"),H=i("8654"),W=Object(q["a"])(L,R,B,!1,null,null,null),G=W.exports;F()(W,{VBtn:z["a"],VFileInput:N["a"],VIcon:U["a"],VTextField:H["a"]});var J={props:{mine:{required:!0}},components:{Searchbar:G},data:function(){return{pists:[]}},mounted:function(){this.get()},methods:{get:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var e,i,n,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:0,t.next=3,f.get("/api/pists?page="+e);case 3:if(i=t.sent,200!=i.status){t.next=8;break}return n=i.data.totalPages,this.pists=Object($["a"])(i.data.datas),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),update:function(){},delete_pist:function(t){var e=this;f.delete("/api/pist/"+t).then((function(){e.pists=e.pists.filter((function(e){return e.id!=t}))})).catch((function(t){console.log(t)}))}}},X=J,Y=i("1f4f"),K=Object(q["a"])(X,A,T,!1,null,null,null),Q=K.exports;F()(K,{VBtn:z["a"],VIcon:U["a"],VSimpleTable:Y["a"]});var Z={components:{Bibliotheque:Q},data:function(){return{dialog:!1,search:"",localFile:null,pists:[]}},mounted:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get_pists();case 2:case"end":return e.stop()}}),e)})))()},methods:{get_pists:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.get("/api/pists").then((function(t){var i=t.data;e.pists=Object($["a"])(i.datas)})).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),Upload:function(){var t=this;if(null!==this.localFile){var e=new FormData;e.append("audio",this.localFile),e.append("sessionid",this.$store.state.current_session.id),f.post("/api/pist",e).then((function(e){var i=e.data;t.$store.commit("push_PistPlaylist",i.Import),t.$store.commit("push_Pist",i.Pist),console.log(i)})).catch((function(t){console.log(t)}))}},handle_LocalFile:function(t){this.localFile=t.target.files[0],this.Upload()},delete_Pist:function(t){var e=this;f.delete("/api/pist/"+t).then((function(){e.$store.commit("remove_PistPlaylist",t)})).catch((function(t){return console.log(t)}))},import_Microphone:function(){},import_PistInSession:function(t){var e,i=this;f.post("/api/session_track",{sessionid:this.$store.state.current_session.id,importid:t.id}).then(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(n){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=f.defaults.baseURL+n.data.src+"?token="+i.$store.state.token,e=n.data,e.src=s,I.add_track({src:s,name:e.name,api_options:Object(c["a"])({},e)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))}}},tt=Z,et=i("b0af"),it=i("99d9"),nt=i("169a"),st=i("8860"),at=i("da13"),rt=i("e449"),ot=Object(q["a"])(tt,C,S,!1,null,null,null),lt=ot.exports;F()(ot,{VBtn:z["a"],VCard:et["a"],VCardActions:it["a"],VCardTitle:it["b"],VDialog:nt["a"],VIcon:U["a"],VList:st["a"],VListItem:at["a"],VMenu:rt["a"],VSimpleTable:Y["a"],VTextField:H["a"]});var ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list-item",{staticClass:"Slist-item"},[i("div",{staticClass:"h-100  w-100  d-flex"},[i("div",{staticClass:"Smanage-item h-100"},[i("v-btn",{staticClass:"Smanager-select h-100",attrs:{id:"select-btn-"+t.pist.api_options.id},on:{click:function(e){return t.DeselectSelect()}}},[t._v("S")])],1),i("div",{staticClass:"w-100 Smanager-content"},[i("div",{staticClass:"d-flex justifejy-space-between"},[i("div",{staticClass:"pist-name"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:t.nameInput_ref,staticClass:"text-white w-90",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),i("v-menu",{attrs:{"offset-x":"",left:"","close-on-content-click":!1,dark:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),n),[i("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}])},[i("v-card",{attrs:{elevation:"11"}},[i("v-list",{staticClass:"my-0 py-0 px-0 mx-0",attrs:{dark:""}},[i("v-list-item",{staticClass:"text-3 menu-item",on:{click:function(e){return t.$refs[t.nameInput_ref].focus()}}},[t._v(" Renomer ")]),i("v-list-item",{staticClass:"text-3 menu-",staticStyle:{display:"grid !important","max-height":"55px"},on:{click:t.ChangePistColor}},[i("div",{staticStyle:{width:"fit-content"}},[t._v(" Couleur de la pist ")]),t._v(" "),i("br"),i("div",{staticClass:"d-flex justify-space-between"},[i("v-btn",{staticClass:"mx-1",attrs:{color:"rgb(169, 99, 209)",elevation:"6",fab:"","x-small":"","max-width":"20px","max-height":"20px"},on:{click:function(e){t.ChangePistColor("rgb(169, 99, 209)")}}}),i("v-btn",{staticClass:"mx-1",attrs:{color:"rgb(99, 209, 137)",elevation:"6",fab:"","x-small":"","max-width":"20px","max-height":"20px"},on:{click:function(e){t.ChangePistColor("rgb(99, 209, 137)")}}}),i("v-btn",{staticClass:"mx-1",attrs:{color:"rgb(209, 99, 99)",elevation:"6",fab:"","x-small":"","max-width":"20px","max-height":"20px"},on:{click:function(e){t.ChangePistColor("rgb(209, 99, 99)")}}}),i("v-btn",{staticClass:"mx-1",attrs:{color:"rgb(29, 139, 236)",elevation:"6",fab:"","x-small":"","max-width":"20px","max-height":"20px"},on:{click:function(e){t.ChangePistColor("rgb(29, 139, 236)")}}})],1)]),t.pist.muted?i("v-list-item",{staticClass:"text-3 menu-item",on:{click:t.DeselectSelect}},[t._v(" Déselectionner ")]):i("v-list-item",{staticClass:"text-3 menu-item",on:{click:t.DeselectSelect}},[t._v(" Sélectionner ")]),i("v-list-item",{staticClass:"text-3 menu-item",on:{click:t.deleteImportedPist}},[t._v(" Supprimer ")])],1)],1)],1)],1),i("div",{staticClass:"w-50"},[i("VolumeController",{attrs:{track:t.pist}})],1)])])])},ut=[],dt=i("53ca"),pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex  w-100"},[i("v-slider",{attrs:{step:"0",max:"100","prepend-icon":"mdi-volume-high","hide-details":"true"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},mt=[],ft={props:{track:{required:!1}},data:function(){return{value:I.player&&!this.track?I.player.masterGain:20}},watch:{value:function(t){I.player&&!this.track?I.set_volume(t):I.player&&this.track&&I.set_track_volume(t,this.track)}},mounted:function(){this.track&&(this.value=50)}},ht=ft,vt=i("ba0d"),_t=Object(q["a"])(ht,pt,mt,!1,null,null,null),gt=_t.exports;F()(_t,{VSlider:vt["a"]});var bt={components:{VolumeController:gt},props:{pist:{required:!0}},data:function(){return{name:this.pist.name,nameInput_ref:"pistnameinput"+this.id,volume:this.pist.gain,player:I}},watch:{volume:function(t){}},mounted:function(){this.selectBtn=document.getElementById("select-btn-"+this.pist.api_options.id),this.pist.muted?this.selectBtn.style.backgroundColor="green":this.selectBtn.style.backgroundColor="gray"},methods:{deleteImportedPist:function(){var t=this,e="/api/session_track/".concat(this.pist.api_options.id);f.delete(e).then(Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.commit("remove_Pist",t.pist.api_options.id),t.pist.ee.emit("removeTrack",t.pist);case 2:case"end":return e.stop()}}),e)})))).catch((function(t){return console.log(t)}))},DeselectSelect:function(){console.log(this.track),document.getElementById("select-btn-"+this.pist.id),0==this.muted?this.selectBtn.style.backgroundColor="green":this.selectBtn.style.backgroundColor="gray"},ChangePistColor:function(t){var e=document.getElementById("pist-"+this.pist.api_options.id);e.style.backgroundColor=t,"object"!==Object(dt["a"])(t)&&this.$store.commit("update_Pist",{pistid:this.pist.api_options.id,field:"color",value:t})},RenamePist:function(){}}},kt=bt,xt=Object(q["a"])(kt,ct,ut,!1,null,null,null),yt=xt.exports;F()(xt,{VBtn:z["a"],VCard:et["a"],VIcon:U["a"],VList:st["a"],VListItem:at["a"],VMenu:rt["a"]});var wt={name:"sidebar",components:{Menu:lt,SidebarPistManager:yt},data:function(){return{open:!0,mini:!0,player:I.player,tracks:I.player.tracks}}},Ct=wt,St=i("5d23"),$t=i("f774"),Vt=Object(q["a"])(Ct,y,w,!1,null,null,null),jt=Vt.exports;F()(Vt,{VBtn:z["a"],VCard:et["a"],VIcon:U["a"],VListItem:at["a"],VListItemTitle:St["a"],VNavigationDrawer:$t["a"]});var Et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"no-radius audios-controller dark-1",staticStyle:{"border-bottom":"1.5px solid #63D189"},attrs:{dark:"",color:"1A1D21"}},[i("div",{staticClass:" ",staticStyle:{"min-width":"270px"}},[i("a",{staticClass:"custom-link mx-1",attrs:{href:"/profile"}},[t._v(" Dashboard")]),i("v-menu",{attrs:{dark:"","offset-y":"","close-on-content-click":!1,"min-width":"120px",width:"180px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("a",t._g(t._b({staticClass:"custom-link mx-1",attrs:{href:"#"}},"a",s,!1),n),[t._v(" Fichier ")])]}}])},[i("v-list",{staticClass:"app-menu py-0",attrs:{elevation:"10"}},[i("v-list-item",{staticClass:"d-flex justify-center text-3 menu-item"},[t._v("Enregistrer")]),i("v-list-item",{staticClass:"d-flex justify-center text-3 menu-item"},[t._v("Télécharger")])],1)],1),i("Menu")],1),i("div",{staticClass:"d-flex",attrs:{id:"barManager-audiosController"}},[i("div",{staticClass:"d-flex align-top pa-2 mr-9",attrs:{id:"bar-manager-btns"}},[t.in_record?i("v-btn",{staticClass:"border-left",attrs:{color:"#D81616"},on:{click:t.stop_Record}},[i("v-icon",[t._v("mdi-stop-circle-outline")])],1):i("v-btn",{staticClass:"border-left",attrs:{color:"#D81616",icon:""},on:{click:t.start_Record}},[i("v-icon",[t._v("mdi-record-circle-outline")])],1),i("v-btn",{staticClass:"border-center",attrs:{color:"#D81616",icon:""}},[i("v-icon",[t._v("mdi-skip-previous")])],1),t.in_play?i("v-btn",{staticClass:"border-center",attrs:{color:"dark",id:"pause-button",icon:""},on:{click:t.handle_Pause}},[i("v-icon",{attrs:{color:"#F24E1E",c:""}},[t._v("mdi-pause-circle-outline")])],1):i("v-btn",{staticClass:"border-center",attrs:{color:"#63D189",icon:"",id:"play-button"},on:{click:t.handlePlay}},[i("v-icon",[t._v("mdi-play-circle-outline")])],1),i("v-btn",{staticClass:"border-right",attrs:{color:"#D81616",icon:""}},[i("v-icon",[t._v("mdi-skip-next")])],1)],1),i("div",{staticClass:"d-flex align-center w-50"},[i("div",{staticClass:"timer"},[t._v(" "+t._s(null!=t.player.duration?t.player.duration:"00:00")+" ")]),i("VolumeController",{attrs:{type:"g_volume"}}),i("v-btn",{class:(t.player.track_on_move?"active":"nocative")+" square-btn",attrs:{small:"",elevation:"10",icon:"",dark:"",color:"white"},on:{click:t.track_move}},[i("v-icon",[t._v("mdi-arrow-left-right")])],1)],1)])])},Pt=[],Ot={components:{VolumeController:gt,Menu:lt},data:function(){return{player:I,play:!1,in_record:!1,in_play:!1,responsive:{g_volumeWidth:"200px"},file_menu:!1}},methods:{handlePlay:function(){this.in_play=!0,I.play()},handle_Pause:function(){this.in_play=!1,I.pause()},mute_unmute:function(){},start_Record:function(){},stop_Record:function(){},track_move:function(){"shift"==I.player.state?I.set_state("select"):I.set_state("shift")}}},It=Ot,At=Object(q["a"])(It,Et,Pt,!1,null,null,null),Tt=At.exports;F()(At,{VBtn:z["a"],VCard:et["a"],VIcon:U["a"],VList:st["a"],VListItem:at["a"],VMenu:rt["a"]});var Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("v-card",{staticStyle:{width:"100%"},attrs:{color:"#1A1D21",ripple:!1,id:"pists-container"},on:{contextmenu:t.show,click:t.on_track}}),i("v-menu",{attrs:{dark:"","position-x":t.x,"position-y":t.y,absolute:"","offset-y":"","z-index":"100"},model:{value:t.show_menu,callback:function(e){t.show_menu=e},expression:"show_menu"}},[i("v-list",{staticClass:"pa-0"},[i("v-list-item",{attrs:{link:""},on:{click:t.move_track}},[t.track_on_move?i("v-list-item-title",[t._v("Fin déplacement")]):i("v-list-item-title",[t._v("Track déplacement")])],1),i("v-list-item",{attrs:{link:""},on:{click:t.track_select}},[i("v-list-item-title",[t._v("Track séléction")])],1),i("v-list-item",{on:{click:t.get_pixeltime}},[i("v-list-item-title",[t._v("Get bar position pixel and time")])],1)],1)],1)],1)},Bt=[],Dt={data:function(){return{text:this.$store.state.current_session.text,Timeline:0,playlist:null,play:null,pause:null,show_menu:!1,x:0,y:0,items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}],ontrack:null,track_on_move:!0}},mounted:function(){this.track_on_move=I.track_on_move},methods:{update_text:function(){},action_Play:function(){this.playlist.ee.emit("play")},action_Pause:function(){this.playlist.ee.emit("pause")},show:function(t){var e=this;t.preventDefault(),this.show_menu=!1,this.x=t.clientX,this.y=t.clientY,this.$nextTick((function(){e.show_menu=!0}))},on_track:function(t){document.querySelectorAll(".channel.channel-0").forEach((function(t){t.classList.contains("selected")&&t.classList.remove("selected")}));var e=t.explicitOriginalTarget.parentElement.parentElement,i=t.explicitOriginalTarget.parentElement.childNodes[1];i.classList.add("selected");var n=I.get_track(e.classList[2]);this.ontrack=n[0]?n[0]:null},move_track:function(){I.track_on_move?I.set_state("select"):I.set_state("shift"),this.track_on_move=I.track_on_move},track_select:function(){var t=document.getElementsByClassName("track-container");for(var e in I.on_selection?I.set_state("cursor"):I.set_state("select"),t)console.log(e)},get_pixeltime:function(){console.log(I.player)}}},Lt=Dt,qt=Object(q["a"])(Lt,Rt,Bt,!1,null,null,null),Mt=qt.exports;F()(qt,{VCard:et["a"],VList:st["a"],VListItem:at["a"],VListItemTitle:St["a"],VMenu:rt["a"]});var Ft={components:{Sidebar:jt,BarManager:Tt,PistContainer:Mt},data:function(){return{imported_pists:null,track_loaded:!1,audio_output:[]}},mounted:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices&&!navigator.mediaDevices.enumerateDevices){e.next=5;break}return e.next=3,navigator.mediaDevices.enumerateDevices();case 3:i=e.sent,t.audio_output=i;case 5:t.init_session();case 6:case"end":return e.stop()}}),e)})))()},methods:{init_session:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$store.state.current_session){t.next=7;break}return t.next=3,this.load_imported_pist();case 3:return t.next=5,I.init_player();case 5:t.next=8;break;case 7:this.$router.push("profile");case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),load_imported_pist:function(){var t=this;f.get("/api/session_track/"+this.$store.state.current_session.id).then((function(e){var i=e.data;t.imported_pists=i;var n=t.format_pists();I.load_tracks(n).then((function(){t.track_loaded=!0,t.handle_time()}))})).catch((function(t){console.log(t)}))},format_pists:function(){var t=this,e=[];return this.imported_pists.forEach((function(i){var n={api_options:{id:i.id,Importid:i.ImportId,pistColor:i.color,muted:i.muted},src:"http://localhost:3000/api/pist/"+i.importid+"?token="+t.$store.state.token,name:i.Import.name,gain:i.gain,customClass:"track-container."+i.id,states:{select:!0,cursor:!1}};e.push(n)})),e},save:function(){var t=[];this.$store.state.current_session.SessionTracks.forEach((function(e){t.push({id:e.id,muted:e.muted,color:e.color,gain:e.gain,name:e.name})}));var e={id:this.$store.state.current_session.id,name:this.$store.state.current_session.session_name,text:this.$store.state.current_session.text,tracks:t};console.log(e)},handle_time:function(){var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.zIndex=100;var e=document.getElementsByClassName("playlist-time-scale");console.log(I.player.cursor),console.log(e),e[0].appendChild(t)}}},zt=Ft,Nt=i("8dd9"),Ut=i("3129"),Ht=Object(q["a"])(zt,b,k,!1,null,null,null),Wt=Ht.exports;F()(Ht,{VBtn:z["a"],VSheet:Nt["a"],VSkeletonLoader:Ut["a"]});var Gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex align-center w-100 justify-center",staticStyle:{height:"100% !important"}},[i("section",{attrs:{id:"animated_background","z-index":"10"}}),t.on_login?i("div",[i("Login",{on:{switchCard:t.switchCard}})],1):t._e(),t.on_register?i("div",[i("Register",{on:{switchCard:t.switchCard}})],1):t._e()])},Jt=[],Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",[i("v-card",{attrs:{elevation:"13",outlined:"","max-width":"450px","min-width":"340px",id:"auth-card"}},[i("v-card-title",{staticClass:"text-center d-flex justify-center bg-dark text-white",attrs:{"primary-title":""}},[t._v(" Connexion ")]),i("v-container",{staticClass:"pa-8",attrs:{fluid:""}},[i("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("v-text-field",{attrs:{type:"password",label:"Mot de passe"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("v-card-actions",{staticClass:"d-flex justify-space-around"},[i("v-btn",{staticClass:"text-orange pa-5",staticStyle:{width:"130px"},attrs:{color:"#282828",small:""},on:{click:function(e){return t.$emit("switchCard","register")}}},[t._v("S'enregistrer")]),i("v-btn",{staticClass:"text-green pa-5",staticStyle:{width:"130px"},attrs:{color:"#282828",small:""},on:{click:t.login}},[t._v("Connexion")])],1)],1)],1)},Yt=[],Kt={data:function(){return{email:"",password:"",dialog:!1}},methods:{login:function(){var t=this;f.post("/api/auth",{email:this.email,password:this.password}).then((function(e){var i=e.data;t.$store.commit("set_Token",i.token),t.$store.commit("set_User",i.user),t.$router.push("profile")})).catch((function(e){var i;t.$store.commit("push_Alert",{open:!0,message:null!==(i=e.response.data.errors)&&void 0!==i?i:e.response.data.error,type:"warning"})}))}}},Qt=Kt,Zt=i("a523"),te=Object(q["a"])(Qt,Xt,Yt,!1,null,null,null),ee=te.exports;F()(te,{VBtn:z["a"],VCard:et["a"],VCardActions:it["a"],VCardTitle:it["b"],VContainer:Zt["a"],VTextField:H["a"]});var ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{ref:"form",attrs:{elevation:"13",outlined:"","max-width":"450px","min-width":"340px",id:"auth-card"}},[i("v-card-title",{staticClass:"text-center d-flex justify-center bg-dark text-white",attrs:{"primary-title":""}},[t._v(" Enregistrement ")]),i("v-container",{staticClass:"pa-8",attrs:{fluid:""}},[i("v-text-field",{ref:"email",attrs:{required:"",rules:t.email_rule,label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("v-text-field",{ref:"name",attrs:{required:"",rules:[function(){return!!t.name||"Ce champs est requis"}],label:"Nom prénom"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-text-field",{ref:"pseudo",attrs:{required:"",rules:[function(){return!!t.pseudo||"Ce champs est requis"}],label:"Pseudo"},model:{value:t.pseudo,callback:function(e){t.pseudo=e},expression:"pseudo"}}),i("v-text-field",{ref:"phone",attrs:{label:"Téléphone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),i("v-text-field",{ref:"password",attrs:{required:"",rules:[function(){return!!t.password||"Ce champs est requis"}],type:"password",label:"Mot de passe"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("v-card-actions",{staticClass:"d-flex justify-space-around"},[i("v-btn",{staticClass:"text-green pa-5",staticStyle:{width:"130px"},attrs:{color:"#282828",small:""},on:{click:function(e){return t.$emit("switchCard","login")}}},[t._v("Connexion")]),i("v-btn",{staticClass:"text-orange pa-5",staticStyle:{width:"130px"},attrs:{color:"#282828",small:""},on:{click:t.checkForm}},[t._v("S'enregistrer")])],1)],1)},ne=[],se=(i("00b4"),{data:function(){return{email:"",name:"",password:"",phone:"",pseudo:"",email_rule:[function(t){return!t||/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"l'email dois être valide"}],formHasErrors:!1}},computed:{form:function(){return{pseudo:this.pseudo,email:this.email,name:this.name,password:this.password}}},methods:{checkForm:function(){var t=this;this.formHasErrors=!1,Object.keys(this.form).forEach((function(e){t.form[e]||(t.formHasErrors=!0),t.$refs[e].validate(!0)})),console.log(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.email)),this.formHasErrors||(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.email)?this.register():this.$store.commit("push_Alert",{type:"warning",open:!0,message:"Email incorrecte"}))},register:function(){var t=this;f.patch("/api/auth",{email:this.email,name:this.name,password:this.password,phone:this.phone,pseudo:this.pseudo}).then((function(e){var i=e.data;t.$store.commit("set_User",i.user),t.$store.commit("set_Token",i.token),t.$router.push("/profile")})).catch((function(e){var i;t.$store.commit("push_Alert",{type:"warning",message:null!==(i=e.response.data.errors)&&void 0!==i?i:e.response.data.error})}))}}}),ae=se,re=Object(q["a"])(ae,ie,ne,!1,null,null,null),oe=re.exports;F()(re,{VBtn:z["a"],VCard:et["a"],VCardActions:it["a"],VCardTitle:it["b"],VContainer:Zt["a"],VTextField:H["a"]});var le={components:{Login:ee,Register:oe},data:function(){return{on_login:!0,on_register:!1}},methods:{switchCard:function(t){"login"==t?(this.on_register=!1,this.on_login=!0):(this.on_login=!1,this.on_register=!0)}}},ce=le,ue=Object(q["a"])(ce,Gt,Jt,!1,null,null,null),de=ue.exports,pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",{staticClass:"px-0 mx-0 w-100 mb-5 pb-1 ",attrs:{tile:"",color:t.banner_color,"min-height":"250px",height:"250px"}},[t.banner_img?i("div",{staticClass:"banner-img"},[i("div",{staticClass:"banner-img-filter"}),i("v-img",{attrs:{src:t.banner_img}})],1):t._e(),i("v-overlay",{staticClass:"w-100",staticStyle:{"z-index":"15"},attrs:{value:t.overlay,color:"#000"}},[i("div",{staticClass:"w-50 p-absolute"},[i("v-card",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.update_banner,expression:"update_banner"}],staticClass:"container",attrs:{elevation:"11",width:"500px",height:"600px"}},[i("div",{staticClass:"fs-2 text-center my-4"},[t._v("Couleur de fond")]),i("v-color-picker",{staticClass:"mx-auto",attrs:{"dot-size":"13","hide-mode-switch":"",mode:"hexa","swatches-max-height":"189"},model:{value:t.banner_color,callback:function(e){t.banner_color=e},expression:"banner_color"}}),i("label",{staticClass:"profile-banner-import-img",attrs:{for:"banner-img-input"}},[i("div",{staticClass:"choose-banner-img-filter"}),null!=t.banner_img?i("v-img",{staticStyle:{"border-radius":"15px"},attrs:{src:t.banner_img}}):t._e(),i("div",{staticClass:"ml-4 d-flex",staticStyle:{position:"absolute","z-index":"11"}},[i("v-file-input",{attrs:{"hide-input":"",accept:".png,.jpg",id:"banner-img-input",filled:"",dark:"",dense:"","prepend-icon":"mdi-progress-download"},model:{value:t.picture_file,callback:function(e){t.picture_file=e},expression:"picture_file"}}),i("v-btn",{staticClass:"mt-1",attrs:{icon:"",color:"red"},on:{click:t.remove_banner_img}},[i("v-icon",[t._v("mdi-close")])],1)],1)],1),i("v-btn",{staticClass:"mt-2",attrs:{small:"",elevation:"",block:"",color:"success",plain:""},on:{click:function(e){return t.update_banner("save_banner")}}},[t._v("Sauvegarder")])],1)],1)]),i("div",{staticClass:"banner-right-top"},[t.on_update?i("v-btn",{staticClass:"pt-2",attrs:{small:"",icon:"",color:"#63D189"},on:{click:function(e){return t.update_banner("open_banner_setting")}}},[i("v-icon",[t._v("mdi-palette")])],1):t._e(),!t.on_update&&t.my_profile?i("v-btn",{staticClass:"mx-2",attrs:{color:"warning",small:"",icon:""},on:{click:t.update_profile}},[i("v-icon",[t._v("mdi-tune-vertical")])],1):t._e(),t.on_update&&t.my_profile?i("v-btn",{attrs:{small:"",icon:"",color:"white"},on:{click:t.update_profile}},[i("v-icon",{attrs:{color:""}},[t._v("mdi-check-underline")])],1):t._e(),i("v-btn",{staticClass:"text-white px-4 mr-2 py-2",attrs:{color:"red","x-small":""},on:{click:function(e){return t.$store.commit("logout")}}},[t._v("Déconnexion")])],1),i("div",{class:"w-80 d-flex user-infos-container "+(t.$store.state.WIDTH<=600?"pa-2":"container"),staticStyle:{height:"80%"}},[i("div",{staticClass:"profile-image-container"},[i("v-img",{staticStyle:{"border-radius":"15px",transition:"all 1s"},attrs:{src:t.user_img,width:+t.$store.state.WIDTH<=600?100:180}},[t.on_update?i("div",{staticClass:"p-img-icon-upload"},[i("v-file-input",{attrs:{"hide-input":"",accept:".png,.jpg",filled:"",dark:"",dense:"","prepend-icon":"mdi-progress-download","meta-picture-profile":"user_picture"},model:{value:t.picture_file,callback:function(e){t.picture_file=e},expression:"picture_file"}})],1):t._e()])],1),i("div",{class:"account-details pt-3 pl-5"+(t.show_details?" show":" dshow")},[i("div",{staticClass:"d-flex h-fit justify-space-between"},[t.on_update?i("v-btn",{attrs:{color:"success",icon:"","x-small":""},on:{click:function(e){return t.update_fields("name",!0)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-eye")])],1):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"custom-profile-input",attrs:{disabled:!t.on_update,type:"text",placeholder:"Prénom Nom"},domProps:{value:t.name},on:{keypress:function(e){return t.update_fields("name")},input:function(e){e.target.composing||(t.name=e.target.value)}}})],1),i("div",{staticClass:"d-flex h-fit justify-space-between"},[t.on_update?i("v-btn",{attrs:{color:"success",icon:"","x-small":""},on:{click:function(e){return t.update_fields("pseudo",!0)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-eye")])],1):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.pseudo,expression:"pseudo"}],staticClass:"custom-profile-input",attrs:{disabled:!t.on_update,type:"text",placeholder:"Pseudo"},domProps:{value:t.pseudo},on:{keypress:function(e){return t.update_fields("pseudo")},input:function(e){e.target.composing||(t.pseudo=e.target.value)}}})],1),i("div",{staticClass:"d-flex h-fit justify-space-between"},[t.on_update?i("v-btn",{attrs:{color:"success","x-small":"",icon:""},on:{click:function(e){return t.update_fields("email",!0)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-eye")])],1):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"custom-profile-input",attrs:{disabled:!t.on_update,type:"text",placeholder:"Email"},domProps:{value:t.email},on:{keypress:function(e){return t.update_fields("email")},input:function(e){e.target.composing||(t.email=e.target.value)}}})],1),i("div",{class:t.on_update?"pl-5":""},[t.on_update?i("input",{directives:[{name:"model",rawName:"v-model",value:t.facebook_link,expression:"facebook_link"}],staticClass:"custom-profile-input",attrs:{disabled:!t.on_update,type:"text",placeholder:"Lien Facebook"},domProps:{value:t.facebook_link},on:{keypress:function(e){return t.update_fields("facebook_link")},input:function(e){e.target.composing||(t.facebook_link=e.target.value)}}}):t._e(),t.on_update?i("input",{directives:[{name:"model",rawName:"v-model",value:t.instagram_link,expression:"instagram_link"}],staticClass:"custom-profile-input",attrs:{disabled:!t.on_update,type:"text",placeholder:"Lien Instagrame"},domProps:{value:t.instagram_link},on:{keypress:function(e){return t.update_fields("instagram_link")},input:function(e){e.target.composing||(t.instagram_link=e.target.value)}}}):t._e()])])]),i("div",{staticClass:"w-80 d-flex container justify-space-between user-bar-bottom align-center banner-footer"},[i("div",{staticClass:"d-flex align-center",attrs:{id:"profile-creations-count"}},[i("v-icon",{attrs:{color:"white"}},[t._v("mdi-creation")]),t._v("0")],1),i("div",{staticClass:"d-flex align-center",attrs:{id:"profile-user-namelastname"}},[i("input",{staticClass:"text-center",attrs:{type:"text",disabled:!0},domProps:{value:t.name}})]),i("div",{staticClass:"d-flex align-center",attrs:{id:"profile-likes-count"}},[t._v(t._s(t.likes)+" "),i("v-icon",{attrs:{color:1==t.liked?"red":"white"},on:{click:t.like_profile}},[t._v("mdi-cards-heart")])],1)])],1),i("div",{staticClass:"container w-80 profile-bottom-section "},[i("div",{class:"d-flex mb-4 profile-label-pages "+(t.$store.state.WIDTH<625?"mobile":"lgscreen")},[t.my_profile?i("v-btn",{staticClass:"mx-2",attrs:{color:"success",outlined:"",rounded:"","x-small":""},on:{click:function(e){t.page="session"}}},[t._v("Session")]):i("v-btn",{staticClass:"mx-2",attrs:{color:"success",outlined:"",rounded:"","x-small":""},on:{click:function(e){t.page="session"}}},[t._v("Creation")]),i("v-btn",{staticClass:"mx-2",attrs:{color:"success",outlined:"",rounded:"","x-small":""},on:{click:function(e){t.page="bibliotheque"}}},[t._v("Bibliothèque")])],1),t.my_profile&&"session"==t.page?i("div",[i("SessionLists")],1):t._e(),"bibliotheque"==t.page?i("div",[i("Bibliotheque",{attrs:{mine:!!t.my_profile}})],1):t._e()])],1)},me=[],fe=(i("5319"),i("025e")),he=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Searchbar",{attrs:{add_url:"/api/session",item:"session",search_url:"/api/search/sessions"}}),i("div",{staticClass:"container"},[i("v-simple-table",[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Session")]),i("th",{staticClass:"text-center"},[t._v("pistes importé")]),i("th",{staticClass:"text-center"},[t._v("mixage")]),i("th",{staticClass:"text-right"},[t._v("action")])])]),i("tbody",t._l(t.sessions,(function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.session_name))]),i("td",{staticClass:"text-center"},[t._v(t._s(e.importedIn))]),i("td",{staticClass:"text-center"},[i("a",{attrs:{href:"http://#"}},[t._v("mix/DL")])]),i("td",{staticClass:"text-right"},[i("v-btn",{attrs:{color:"success",outlined:"","x-small":""},on:{click:function(i){return t.open_session(e.id)}}},[t._v("ouvrir")]),i("v-btn",{attrs:{"x-small":"",icon:"",color:"red"},on:{click:function(i){return t.delete_session(e.id)}}},[i("v-icon",[t._v("mdi-close")])],1)],1)])})),0)])],1)],1)},ve=[],_e={components:{Searchbar:G},data:function(){return{sessions:[],on_add:!1,session_name:"",delete_press:{sessionid:null,press:0}}},mounted:function(){this.get_sessions()},methods:{get_sessions:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var e,i,n,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:0,t.next=3,f.get("/api/sessions?page="+e);case 3:if(i=t.sent,200!=i.status){t.next=10;break}return n=i.data.totalPages,this.sessions=i.data.datas,t.abrupt("return",n);case 10:console.log(i);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),open_session:function(t){var e=this;f.get("/api/session/"+t).then((function(t){var i=t.data;e.$store.commit("set_CurrentSession",i.session),e.$router.push("/session")})).catch((function(t){return console.log(t)}))},delete_session:function(t){var e=this;null==this.delete_press.sessionid?(this.delete_press.sessionid=t,this.delete_press.press=1,this.$store.commit("push_Alert",{message:"Confirmer la supression en reclickant",type:"warning"})):this.delete_press.sessionid==t?f.delete("/api/session/"+t).then((function(i){i.data;e.sessions=e.sessions.filter((function(e){return e.id!=t})),e.delete_press={sessionid:null,press:0}})).catch((function(t){return console.log(t)})):this.delete_press={sessionid:null,press:0}},create_session:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.session_name=this.session_name?this.session_name.replace(/[ ]+/g,""):e.replace(/[ ]+/g,""),this.session_name?f.post("/api/session/",{name:this.session_name}).then((function(e){var i=e.data;console.log(i),t.sessions.push(i),t.on_add=!1,t.$store.commit("append_Session",i)})).catch((function(t){console.log(t)})):this.$store.commit("push_Alert",{message:"Veuillez remplir le champs nom pour créer une session",type:"warning",open:!0})}}},ge=_e,be=Object(q["a"])(ge,he,ve,!1,null,null,null),ke=be.exports;F()(be,{VBtn:z["a"],VIcon:U["a"],VSimpleTable:Y["a"]});var xe={components:{SessionLists:ke,Bibliotheque:Q},data:function(){return{on_update:!1,show_details:!0,my_profile:!0,page:"session",overlay:!1,user_img:f.defaults.baseURL+"/api/picture?userid=",name:"",pseudo:"",email:"",phone:"",facebook_link:"",instagram_link:"",likes:0,liked:!1,picture_file:null,banner_color:"#252525",banner_img:null,fields:[],settings_fields:[]}},watch:{picture_file:function(){var t=this;if(this.overlay){var e=new FileReader;e.addEventListener("load",(function(){return t.banner_img=e.result})),e.readAsDataURL(this.picture_file)}else this.update_picture()}},mounted:function(){this.$route.query&&this.$route.query.userid?(this.my_profile=!1,this.user_profile()):(this.my_profile=!0,this.user_img+=this.$store.state.user.id,this.me(),this.my_settings())},methods:{details:function(){this.show_details=!this.show_details},me:function(){var t=this;f.get("/api/user").then((function(e){var i,n,s,a=e.data;t.name=a.name,t.pseudo=null!==(i=a.pseudo)&&void 0!==i?i:"",t.email=a.email,t.facebook_link=null!==(n=a.facebook_link)&&void 0!==n?n:"",t.instagram_link=null!==(s=a.instagram_link)&&void 0!==s?s:"",t.$store.commit("set_User",a)})).catch((function(){t.$store.commit("push_Alert",{type:"danger",message:"Un problème est survenue !"})}))},my_settings:function(){var t=this;f.get("/api/profile-settings").then((function(e){var i=e.data;console.log(i);var n=Object(fe["Array2Object"])(i,"setting_name","setting_value");n["banner-img"]&&(n["banner-img"]=f.defaults.baseURL+"/api/profile/banner?userid="+t.$store.state.user.id),t.banner_img=n["banner-img"],t.$store.commit("push_profile_settings",n),console.log(n["banner-img"]),n["banner-color"]&&(t.banner_color=n["banner-color"]),n["likes"]&&(t.likes=n.likes)})).catch((function(t){return console.log(t)}))},user_profile:function(){var t,e,i=this,n=null!==(t=this.$route.query.userid)&&void 0!==t?t:null;n&&f.get(null!==(e="/api/profile?&userid="+n+"&token="+this.$store.state.token)&&void 0!==e?e:null).then((function(t){var e=t.data;if(e.creator)for(var n in e.creator)"undefined"!=i[n]&&(i[n]=e.creator[n]);if(e.settings){var s=Object(fe["Array2Object"])(e.settings,"setting_name","setting_value");for(var a in s)null!=a&&"undefined"!=i[a.replace("-","_")]&&(i[a.replace("-","_")]=s[a])}console.log(e.like),e.like&&(i.liked=!0)})).catch((function(t){return console.log(t)}))},like_profile:function(){var t=this;f.post("/api/like",{model:"creator",modelid:this.id}).then((function(e){var i=e.data;i.destroyed_like?(t.liked=!1,t.likes--):(t.liked=!0,t.likes++)})).catch((function(t){console.log(t)}))},update_profile:function(){var t=this;if(0==this.on_update)this.on_update=!0;else{if(this.fields.length>0){var e={};this.fields.forEach((function(i){e[i]=t[i]})),f.patch("/api/user",e).then((function(){t.$store.commit("push_Alert",{type:"success",message:"Profile mis à jour"})})).catch((function(t){console.log(t)}))}this.settings_fields.length>0&&this.settings_fields.includes("banner")&&console.log("update banner"),this.on_update=!1}},update_fields:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.fields.includes(t)||e?e&&!this.settings_fields.includes(t)&&this.settings_fields.push(t):this.fields.push(t)},update_picture:function(){var t=new FormData;t.append("profile_picture",this.picture_file),f.post("/api/picture",t).then((function(){})).catch((function(t){console.log(t)}))},update_banner:function(t){if("object"==Object(dt["a"])(t))this.overlay=!1;else if("open_banner_setting"==t)this.overlay=!0;else if("save_banner"==t){if(this.picture_file){var e=new FormData;e.append("banner-img",this.picture_file),f.post("/api/profile-setting/banner-upload",e).then((function(t){var e=t.data;console.log(e)})).catch((function(t){console.log(t)}))}this.$store.state.profile_settings["banner-color"]&&this.$store.state.profile_settings["banner-color"]!=this.banner_color&&(this.$store.commit("push_profile_settings",{"banner-color":this.banner_color}),f.patch("/api/profile-setting",{setting_name:"banner-color",value:this.banner_color}).then((function(t){var e=t.data;console.log(e)})).catch((function(t){console.log(t)}))),this.overlay=!1}},remove_banner_img:function(){this.banner_img=null,this.$store.commit("push_profile_settings",{"banner-img":null}),f.delete("/api/profile-setting/banner-img").catch((function(t){console.log(t)}))}}},ye=xe,we=i("03a4"),Ce=i("adda"),Se=i("a797"),$e=i("269a"),Ve=i.n($e),je=i("a293"),Ee=Object(q["a"])(ye,pe,me,!1,null,null,null),Pe=Ee.exports;F()(Ee,{VBtn:z["a"],VCard:et["a"],VColorPicker:we["a"],VFileInput:N["a"],VIcon:U["a"],VImg:Ce["a"],VOverlay:Se["a"]}),Ve()(Ee,{ClickOutside:je["a"]});var Oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},Ie=[],Ae={data:function(){return{creators:[],packs:[]}},mounted:function(){this.get_creators()},methods:{get_creators:function(){f.get("/api/creators").then((function(t){var e=t.data;console.log(e)})).catch((function(t){console.log(t)}))},get_packs:function(){}}},Te=Ae,Re=Object(q["a"])(Te,Oe,Ie,!1,null,null,null),Be=Re.exports;n["a"].use(g["a"]);var De=new g["a"]({mode:"history",routes:[{path:"/",name:"home",component:Be},{path:"/authentication",name:"authentication",component:de},{path:"/profile",name:"profile",component:Pe},{path:"/session",name:"session",component:Wt},{path:"/discover",name:"discorver",component:Be}]}),Le=De,qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{class:t.appClass,staticStyle:{"overflow-x":"auto"}},["session"!=t.$route.name?i("div",[i("Appbar")],1):t._e(),i("v-app",[t._l(this.$store.state.alerts,(function(t){return i("div",{key:t.id,staticStyle:{position:"absolute",top:"80px",right:"10px","z-index":"99"}},[i("Alert",{attrs:{alert:t}})],1)})),i("v-main",{class:t.$store.state.main_theme},[i("router-view")],1)],2)],1)},Me=[],Fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app-bar",{attrs:{app:"",color:"#282828",dark:""}},[i("div",{staticClass:"d-flex justify-space-between align-center",staticStyle:{width:"100vw"}},[i("div",[t.$store.state.user&&"profile"!=t.$route.name?i("a",{attrs:{href:"/profile"}},[t._v("Profile")]):t._e()]),i("h1",{staticStyle:{"font-family":"Brush Script MT",cursor:"pointer"},on:{click:function(e){return t.$router.push("discover")}}},[t._v("Sound"),i("span",{staticStyle:{color:"#EE1B1B"}},[t._v("Record")])]),i("div")])])},ze=[],Ne=i("40dc"),Ue={},He=Object(q["a"])(Ue,Fe,ze,!1,null,null,null),We=He.exports;F()(He,{VAppBar:Ne["a"]});var Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-alert",{staticClass:"mx-auto",staticStyle:{width:"720px"},attrs:{elevation:"15",type:t.alert.type,transition:"scale-transition"},model:{value:t.alert.open,callback:function(e){t.$set(t.alert,"open",e)},expression:"alert.open"}},[i("v-row",[i("v-col",{attrs:{cols:"11"}},[Array.isArray(t.alert.message)?i("div",t._l(t.alert.message,(function(e){return i("div",{key:e},[t._v(" "+t._s(e)+" ")])})),0):i("div",[t._v(" "+t._s(t.alert.message)+" ")])]),i("v-col",{staticClass:"ma-0 pa-0 pt-1",attrs:{cols:"1"}},[i("v-btn",{attrs:{color:"red",icon:""},on:{click:function(e){return t.removeAlert(t.alert)}}},[i("v-icon",[t._v("mdi-close")])],1)],1)],1)],1)],1)},Je=[],Xe={props:{alert:{required:!0}},mounted:function(){var t=this;console.log("okok"),setTimeout((function(){t.$store.commit("remove_Alert",t.alert.id)}),1e4)},methods:{removeAlert:function(t){t.open=!1,this.$store.commit("remove_Alert",t.id)}}},Ye=Xe,Ke=i("0798"),Qe=i("62ad"),Ze=i("0fd9"),ti=Object(q["a"])(Ye,Ge,Je,!1,null,null,null),ei=ti.exports;F()(ti,{VAlert:Ke["a"],VBtn:z["a"],VCol:Qe["a"],VIcon:U["a"],VRow:Ze["a"]});var ii={components:{Appbar:We,Alert:ei},data:function(){return{appClass:""}},mounted:function(){this.checkScreen(),this.is_loggedIn(),window.onresize=this.checkScreen,"homme"==this.$route.name&&(this.appClass="bg-dark")},methods:{is_loggedIn:function(){var t=this;f.get("/api/auth/").catch((function(){"authentication"!==t.$route.name&&t.$router.push("authentication")}))},checkScreen:function(){this.$store.commit("set_Width",window.screen.width)}}},ni=ii,si=i("7496"),ai=i("f6c4"),ri=Object(q["a"])(ni,qe,Me,!1,null,null,null),oi=ri.exports;F()(ri,{VApp:si["a"],VMain:ai["a"]}),window.localStorage.getItem("vuex")||window.localStorage.setItem("vuex","{}"),"/authentication"==window.location.pathname&&(i("368ec"),i("2d5e")),i("7d05"),i("c987"),n["a"].use(o["a"]),n["a"].config.productionTip=!0,window.addEventListener("resize",(function(){_.commit("set_Width",window.innerWidth)})),new n["a"]({vuetify:r,store:_,router:Le,render:function(t){return t(oi)}}).$mount("#app")},"7d05":function(t,e,i){},c987:function(t,e,i){}});
//# sourceMappingURL=app.e34040e1.js.map